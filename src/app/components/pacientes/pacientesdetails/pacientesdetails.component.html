<div class="container">
    <h3 style="color: #000000">PACIENTE</h3>
    <p>Edite o formulário para atualizar a tabela de pacientes</p>
    <div class="card">
        <div class="card-body centralizarModal">
            <div>
                <div>
                    Nome
                    <input type="text" name="nome" class="form-control" (keyup.enter)="save()"
                        [(ngModel)]="paciente.nome" />

                </div>
                <div>
                    Especie
                    <input type="text" name="nome" class="form-control" (keyup.enter)="save()"
                        [(ngModel)]="paciente.especie" />

                </div>

                <div>
                    Data de Nascimento
                    <input type="text" name="nome" class="form-control" (keyup.enter)="save()"
                        [(ngModel)]="paciente.dataNascimento" />
                </div>

                <div>
                    Raça
                    <input type="text" name="nome" class="form-control" (keyup.enter)="save()"
                        [(ngModel)]="paciente.raca" />
                </div>

                <div>

                </div>

                <div>
                    @if(paciente.tutor == null){
                    <button type="button" style="background-color: #87B6A7; color: aliceblue;" class="btn btn-rounded"
                        mdbRipple (click)="buscarTutor()">
                        Buscar tutor</button>
                    }@else {
                    <div class="row">
                        <div class="col-lg-8">
                            <p class="text-primary alert-primary">Tutor: {{paciente.tutor.nome}}</p>
                        </div>
                        <div class="col-lg-4">
                            <button type="button" class="btn btn-warning btn-rounded" mdbRipple (click)="buscarTutor()">
                                Trocar Tutor
                            </button>
                        </div>
                    </div>
                    }
                </div>

                <div class="teste">
                    <button type="button" style="background-color: #87B6A7; color: aliceblue;" class="btn btn-rounded"
                        mdbRipple (click)="buscarProcedimentos()">
                        Buscar Procedimento
                    </button>
                </div>
                <table border="1" class="table table-striped">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nome</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody>
                        @for (procedimento of paciente.procedimentos; track $index) {
                        <tr>
                            <td>{{ procedimento.id }}</td>
                            <td>{{ procedimento.nomeProcedimento }}</td>
                            <td class="direita">
                                <button type="button" class="btn btn-danger btn-rounded" mdbRipple
                                    (click)="desvincularProcedimentoPaciente(procedimento)">
                                    Deletar
                                </button>
                            </td>
                        </tr>
                        }
                    </tbody>
                </table>


            </div>



            <button type="button" style="background-color: #B6174B; color: aliceblue;" class="btn btn-info btn-rounded"
                (keyup.enter)="save()" data-mdb-ripple-init (click)="save()">
                Adicionar
            </button>
        </div>
        <div class="col-lg-4"></div>
    </div>
</div>

<ng-template #modalTutores>
    <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Tutores</h5>
        <button type="button" class="btn-close" aria-label="Close" (click)="modalRef.close()"></button>
    </div>
    <div class="modal-body">

        <app-tutoreslist [esconderBotoes]="true" (retorno)="retornoTutor($event)"></app-tutoreslist>

    </div>
</ng-template>

<ng-template #modalProcedimentos>
    <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Procedimentos</h5>
        <button type="button" class="btn-close" aria-label="Close" (click)="modalRef.close()"></button>
    </div>
    <div class="modal-body">

        <app-procedimentoslist [esconderBotoes]="true" (retorno)="retornoProcedimento($event)"></app-procedimentoslist>

    </div>

</ng-template>